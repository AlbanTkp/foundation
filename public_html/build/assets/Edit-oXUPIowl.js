import{j as e,W as S,r as v,Y as R}from"./app-C3PXmaM_.js";import{F as D,a as B,T as O,E as k}from"./TextArea-CEvriF3N.js";import{V as U,A as V}from"./AuthenticatedLayout-DfuJ0Mli.js";import{I as n}from"./InputLabel-C-IZqC6a.js";import{T as g,I as m}from"./InputError-UNtSL6RG.js";import{S as b}from"./Select-LpdpJSSP.js";import{N as r}from"./Constants-h2WWbW83.js";import"./index-BXlxYhTB.js";import"./ApplicationLogo-BOhayj_1.js";const H=({auth:y,pageCategories:p,page:s})=>{const u=s?"Modification de page":"Ajout de page",w=[{href:route("pages.index"),icon:e.jsx(U,{className:"w-6 h-6"}),label:"Pages"},{href:"#",icon:s?e.jsx(D,{className:"w-6 h-6"}):e.jsx(B,{className:"w-6 h-6"}),label:u}],{data:o,setData:i,post:F,put:A,processing:E,errors:d,reset:P}=S({banner:null,title:s?s.title:"",content:s?s.content:"",description:s&&s.description?s.description:"",category:s&&s.category?s.category:""}),[c,x]=v.useState(null),[f,j]=v.useState(null),[N,h]=v.useState(null),T=t=>{i("content",t)},I=t=>{const l=t.target.files[0];if(l)if(l.type.startsWith("image/")){i("banner",l);const a=new FileReader;a.onloadend=()=>{j(a.result),h(null)},a.readAsDataURL(l)}else if(l.type.startsWith("video/")){i("banner",l);const a=new FileReader;a.onloadend=()=>{h(a.result),j(null)},a.readAsDataURL(l)}else j(null),h(null);else j(null),h(null)};v.useEffect(()=>(s&&(s.category?p[r.IDEA]?x(r.IDEA):x(r.WORK):x(r.ABOUT)),()=>{P("banner","title","content","description","type")}),[]);const C=t=>{t.preventDefault();let l="workPages";c==r.ABOUT?l="aboutPages":c==r.IDEA&&(l="ideaPages"),s?A(route(l+".update",s.id),{onSuccess:a=>{console.log(a),alert('Page "'+s.title+'" modifiée avec succès')},onError:a=>{console.log(a)}}):F(route(l+".store"),{onSuccess:a=>{alert('Page "'+o.title+'" créée avec succès')},onError:a=>{}})};return e.jsxs(V,{user:y.user,pageTitle:u,path:w,children:[e.jsx(R,{title:u}),e.jsx("div",{className:"md:py-12",children:e.jsx("div",{className:"w-full mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"p-3 overflow-hidden bg-white shadow-sm sm:rounded-lg lg:px-20",children:[e.jsx("h2",{className:"my-2 text-2xl font-bold text-center uppercase",children:u}),e.jsx("hr",{}),e.jsxs("form",{className:"flex flex-col mt-10 md:space-y-8",encType:"multipart/form-data",onSubmit:C,children:[!s&&e.jsx("div",{className:"my-2",children:e.jsxs("div",{className:"grid md:grid-cols-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(n,{value:"Type de page:"})}),e.jsx(b,{items:[{value:r.ABOUT},{value:r.IDEA},{value:r.WORK}],valueField:"value",className:"block col-span-2 mt-1",textField:"value",isFocused:!0,onChange:t=>{x(t.value)}})]})}),e.jsxs("div",{className:"my-2",children:[e.jsxs("div",{className:"grid md:grid-cols-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(n,{htmlFor:"title",value:"Titre de la page:"})}),e.jsx(g,{id:"title",type:"text",name:"title",value:o.title,className:"block col-span-2 mt-1",autoComplete:"title",isFocused:!0,onChange:t=>i("title",t.target.value)})]}),e.jsx(m,{message:d.title,className:"mt-2"})]}),c&&c!=r.ABOUT&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"my-2",children:[e.jsxs("div",{className:"grid md:grid-cols-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(n,{value:"Catégorie de page:"})}),e.jsx(b,{value:s&&{value:p[c].find(t=>t==o.category)},items:p[c].map(t=>({value:t})),valueField:"value",className:"block col-span-2 mt-1",textField:"value",isFocused:!0,onChange:t=>{i("category",t.value)}})]}),e.jsx(m,{message:d.category,className:"mt-2"})]}),e.jsxs("div",{className:"my-2",children:[e.jsxs("div",{className:"grid md:grid-cols-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(n,{htmlFor:"title",value:"Description de la page:"})}),e.jsx(O,{rows:5,id:"title",type:"text",name:"title",value:o.description,className:"block col-span-2 mt-1",autoComplete:"title",isFocused:!0,onChange:t=>i("description",t.target.value)})]}),e.jsx(m,{message:d.description,className:"mt-2"})]}),e.jsxs("div",{className:"my-2",children:[e.jsxs("div",{className:"grid md:grid-cols-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(n,{htmlFor:"banner",value:"Bannière (Image ou Vidéo):"})}),e.jsx(g,{id:"banner",type:"file",accept:"image/*,video/*",name:"banner",className:"block col-span-2 mt-1",isFocused:!0,onChange:I})]}),e.jsx("div",{className:"flex justify-center w-full lg:px-52",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-center w-full gap-6 ",children:[s&&s.banner.type=="IMAGE"&&e.jsx("img",{src:s.banner.path,alt:"Selected",className:"object-cover w-40 h-40 p-2 mt-2 bg-red-400"}),s&&s.banner.type=="VIDEO"&&e.jsx("video",{autoPlay:!0,loop:!0,src:s.banner.path,alt:"Selected",className:"object-cover w-40 h-40 p-2 mt-2 bg-red-400"}),f&&e.jsxs(e.Fragment,{children:[s&&e.jsx("h3",{className:"w-full text-center md:w-auto",children:"Remplacer par"}),e.jsx("img",{src:f,alt:"Selected",className:"object-cover w-40 h-40 p-2 mt-2 bg-green-500"})]}),N&&e.jsxs(e.Fragment,{children:[s&&e.jsx("h3",{className:"w-full text-center md:w-auto",children:"Remplacer par"}),e.jsx("video",{autoPlay:!0,loop:!0,src:N,alt:"Selected",className:"object-cover w-40 h-40 p-2 mt-2 bg-green-500"})]})]})}),e.jsx(m,{message:d.banner,className:"mt-2"})]})]}),e.jsxs("div",{className:"my-2",children:[e.jsx(n,{className:"my-3 text-center uppercase",value:"Contenu de la page"}),e.jsx(k,{htmlContent:o.content,onContentChange:T}),e.jsx(m,{message:d.content,className:"mt-2"})]}),e.jsx("div",{className:"my-2",children:e.jsx("div",{id:"editorjs"})}),e.jsx("button",{className:"text-lg font-bold text-white mt-7 md:mt-0 ms-4 btn btn-primary",disabled:E,children:s?"Modifier":"Créer"})]})]})})})]})};export{H as default};

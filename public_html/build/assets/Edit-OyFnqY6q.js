import{j as e,W as I,r as u,Y as C}from"./app-C3PXmaM_.js";import{F as E,a as F,E as R}from"./TextArea-CEvriF3N.js";import{I as S}from"./index-BXlxYhTB.js";import{A}from"./AuthenticatedLayout-DfuJ0Mli.js";import{I as i}from"./InputLabel-C-IZqC6a.js";import{T as h,I as m}from"./InputError-UNtSL6RG.js";import"./ApplicationLogo-BOhayj_1.js";const U=({auth:j,paper:t})=>{const l=t?"Modification d'article":"Ajout d'article",g=[{href:route("papers.index"),icon:e.jsx(S,{className:"w-6 h-6"}),label:"Articles"},{href:"#",icon:t?e.jsx(E,{className:"w-6 h-6"}):e.jsx(F,{className:"w-6 h-6"}),label:l}],{data:r,setData:n,post:f,put:p,processing:N,errors:c,reset:b}=I({banner:null,title:t?t.title:"",content:t?t.content:""}),[d,x]=u.useState(null),v=a=>{n("content",a)},w=a=>{const s=a.target.files[0];if(s&&s.type.startsWith("image/")){n("banner",s);const o=new FileReader;o.onloadend=()=>{x(o.result)},o.readAsDataURL(s)}else x(null);console.log(r)};u.useEffect(()=>()=>{b("banner","title","content")},[]);const y=a=>{a.preventDefault(),t?p(route("papers.update",t.id),{onSuccess:s=>{console.log(s)},onError:s=>{console.log(s)}}):f(route("papers.store"),{onSuccess:s=>{console.log(s)},onError:s=>{console.log(s)}})};return e.jsxs(A,{user:j.user,pageTitle:l,path:g,children:[e.jsx(C,{title:l}),e.jsx("div",{className:"md:py-12",children:e.jsx("div",{className:"w-full mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"p-3 overflow-hidden bg-white shadow-sm sm:rounded-lg lg:px-20",children:[e.jsx("h2",{className:"my-2 text-2xl font-bold text-center uppercase",children:l}),e.jsx("hr",{}),e.jsxs("form",{className:"flex flex-col mt-10 md:space-y-8",encType:"multipart/form-data",onSubmit:y,children:[e.jsxs("div",{className:"my-2",children:[e.jsxs("div",{className:"grid md:grid-cols-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(i,{htmlFor:"title",value:"Titre de l'article:"})}),e.jsx(h,{id:"title",type:"text",name:"title",value:r.title,className:"block col-span-2 mt-1",autoComplete:"title",isFocused:!0,onChange:a=>n("title",a.target.value)})]}),e.jsx(m,{message:c.name,className:"mt-2"})]}),e.jsxs("div",{className:"my-2",children:[e.jsxs("div",{className:"grid md:grid-cols-3",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(i,{htmlFor:"banner",value:"Image bannière:"})}),e.jsx(h,{id:"banner",type:"file",accept:"image/*",name:"banner",className:"block col-span-2 mt-1",isFocused:!0,onChange:w})]}),e.jsx("div",{className:"flex justify-center w-full lg:px-52",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-center w-full gap-6 ",children:[t&&e.jsx("img",{src:t.banner.path,alt:"Selected",className:"object-cover w-40 h-40 p-2 mt-2 bg-red-400"}),d&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"w-full text-center md:w-auto",children:"Remplacer par"}),e.jsx("img",{src:d,alt:"Selected",className:"object-cover w-40 h-40 p-2 mt-2 bg-green-500"})]})]})}),e.jsx(m,{message:c.name,className:"mt-2"})]}),e.jsxs("div",{className:"my-2",children:[e.jsx(i,{className:"my-3 text-center uppercase",value:"Contenu de l'article"}),e.jsx(R,{htmlContent:r.content,onContentChange:v}),e.jsx(m,{message:c.address,className:"mt-2"})]}),e.jsx("div",{className:"my-2",children:e.jsx("div",{id:"editorjs"})}),e.jsx("button",{className:"text-lg font-bold text-white mt-7 md:mt-0 ms-4 btn btn-primary",disabled:N,children:t?"Modifier":"Créer"})]})]})})})]})};export{U as default};
